<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
  <p-menubar
    [model]="items"
    class="rounded-2xl border border-surface-200 shadow-lg bg-white/80 backdrop-blur-md px-6 py-3"
  >
    <ng-template pTemplate="start">
      <a
        routerLink="/"
        class="flex items-center gap-3 outline-none no-underline group"
      >
        <img
          src="/icon.png"
          class="w-10 h-10 group-hover:scale-105 transition-transform"
          alt="Logo"
        />
        <span
          class="font-ibmArabic font-bold text-xl text-slate-800 hidden md:block"
        >
          روبست بتس
        </span>
      </a>
    </ng-template>

    <ng-template pTemplate="end">
      <div class="flex items-center gap-3">
        @if (isLoggedIn) { @if (role === 'Admin' || role === 'SuperAdmin') {
        <p-tag
          value="مدير النظام"
          severity="danger"
          class="hidden md:block"
        ></p-tag>
        }

        <p-menu
          #userMenu
          [model]="userMenuItems"
          [popup]="true"
          appendTo="body"
          styleClass="w-56 font-ibmArabic"
        />

        <div
          class="cursor-pointer flex items-center gap-2 hover:bg-slate-100 p-1 pr-3 rounded-full transition-colors border border-transparent hover:border-slate-200"
          (click)="userMenu.toggle($event)"
        >
          <span
            class="font-bold text-slate-700 text-sm hidden sm:block max-w-[120px] truncate"
          >
            {{ getShortName(currentUser?.fullName) }}
          </span>

          @if (userProfilePic == undefined){
          <p-avatar
            [label]="userInitials"
            [icon]="!userProfilePic && !userInitials ? 'pi pi-user' : undefined"
            shape="circle"
            styleClass="bg-primary-100 text-primary-700 font-bold"
          ></p-avatar>
          } @else {
          <p-avatar
            [image]="userProfilePic"
            [icon]="!userProfilePic && !userInitials ? 'pi pi-user' : undefined"
            shape="circle"
            styleClass="bg-primary-100 text-primary-700 font-bold"
          ></p-avatar>
          }

          <i class="pi pi-chevron-down text-xs text-slate-400"></i>
        </div>

        } @else {

        <p-button
          label="دخول"
          [routerLink]="['/auth/signin']"
          severity="secondary"
          [text]="true"
          styleClass="font-ibmArabic font-bold"
        />

        <p-button
          label="حساب جديد"
          [routerLink]="['/auth/signup']"
          [rounded]="true"
          severity="primary"
          styleClass="font-ibmArabic font-bold px-6"
        />
        }
      </div>
    </ng-template>
  </p-menubar>
</div>
